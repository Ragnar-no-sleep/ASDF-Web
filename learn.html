<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn $asdfasdfa â€” Down the Rabbit Hole</title>
    <meta name="description" content="Discover $asdfasdfa. Interactive journey from newcomer to believer.">

    <!-- Open Graph -->
    <meta property="og:title" content="Learn ASDF - The Rabbit Hole">
    <meta property="og:description" content="Discover $asdfasdfa. Interactive journey from newcomer to believer.">
    <meta property="og:image" content="https://alonisthe.dev/og-learn.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <style>
        /* =============================================
           LEARN PAGE - Rabbit Hole Experience
           ============================================= */

        :root {
            /* Warm dark palette */
            --hub-deep: #0d0906;
            --hub-elevated: #1a1410;
            --hub-surface: #2a221c;

            /* Warm neutrals */
            --warm-primary: #faf8f5;
            --warm-secondary: #c9b89a;
            --warm-muted: #8a7a65;
            --warm-ghost: #5a4d40;

            /* Gold accent */
            --gold-400: #fcd34d;
            --gold-500: #eab308;
            --amber-400: #fbbf24;
            --amber-500: #f59e0b;
            --orange-500: #f97316;

            /* Typography */
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-sans);
            background: var(--hub-deep);
            color: var(--warm-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Progress Bar */
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--hub-elevated);
            z-index: 100;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--gold-500), var(--amber-500));
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 90;
            padding: 16px 24px;
            background: linear-gradient(to bottom, rgba(13,9,6,0.95), rgba(13,9,6,0));
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .back-link {
            font-family: var(--font-mono);
            font-size: 12px;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--warm-muted);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .back-link:hover {
            color: var(--gold-400);
        }

        .level-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            background: rgba(234,179,8,0.1);
            border: 1px solid rgba(234,179,8,0.2);
            border-radius: 9999px;
        }

        .level-badge span {
            font-family: var(--font-mono);
            font-size: 12px;
            color: var(--gold-400);
        }

        /* Phase Section */
        .phase {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 80px 24px;
            opacity: 0.15;
            transition: opacity 0.5s ease;
            position: relative;
        }

        .phase.unlocked {
            opacity: 1;
        }

        .phase.completed {
            opacity: 1;
        }

        .phase-inner {
            max-width: 540px;
            width: 100%;
        }

        /* Level Tag */
        .phase-level {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 9999px;
            font-family: var(--font-mono);
            font-size: 11px;
            letter-spacing: 0.1em;
            margin-bottom: 24px;
            background: rgba(201,184,154,0.1);
            border: 1px solid rgba(201,184,154,0.2);
            color: var(--warm-muted);
            transition: all 0.3s ease;
        }

        .phase.completed .phase-level {
            background: rgba(234,179,8,0.2);
            border-color: rgba(234,179,8,0.3);
            color: var(--gold-400);
        }

        /* Phase Title */
        .phase-title {
            font-size: clamp(28px, 5vw, 40px);
            font-weight: 300;
            background: linear-gradient(135deg, #faf8f5 0%, #c9b89a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .phase:not(.unlocked) .phase-title {
            background: linear-gradient(135deg, #5a4d40 0%, #3a3330 100%);
            -webkit-background-clip: text;
            background-clip: text;
        }

        .phase-subtitle {
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--warm-muted);
            margin-bottom: 32px;
            opacity: 0.6;
        }

        /* Content */
        .phase-content {
            margin-bottom: 32px;
        }

        .phase-content p {
            font-size: 18px;
            color: var(--warm-secondary);
            line-height: 1.7;
            margin-bottom: 16px;
            transition: all 0.3s ease;
        }

        .phase:not(.unlocked) .phase-content p {
            filter: blur(4px);
            opacity: 0.1;
        }

        /* Lock Indicator */
        .lock-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--warm-ghost);
        }

        .phase.unlocked .lock-indicator {
            display: none;
        }

        /* Interaction Boxes */
        .interaction {
            margin-top: 24px;
            display: none;
        }

        .phase.unlocked .interaction {
            display: block;
        }

        /* Drag Interaction */
        .drag-track {
            position: relative;
            height: 64px;
            border-radius: 12px;
            overflow: hidden;
            background: rgba(0,0,0,0.3);
            cursor: default;
        }

        .drag-hint {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 24px;
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--warm-ghost);
            transition: opacity 0.3s ease;
        }

        .drag-reveal {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(90deg, rgba(234,179,8,0.1), rgba(245,158,11,0.05));
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--gold-400);
            clip-path: inset(0 100% 0 0);
            transition: clip-path 0.1s ease;
        }

        .drag-handle {
            position: absolute;
            left: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 48px;
            height: 48px;
            border-radius: 8px;
            background: linear-gradient(135deg, rgba(234,179,8,0.3), rgba(234,179,8,0.1));
            border: 1px solid rgba(234,179,8,0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: grab;
            color: var(--gold-400);
            font-size: 18px;
            user-select: none;
            touch-action: none;
            transition: transform 0.1s ease;
        }

        .drag-handle:active {
            cursor: grabbing;
        }

        .drag-complete {
            display: none;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 24px;
            font-family: var(--font-mono);
            font-size: 13px;
        }

        .drag-complete .step {
            opacity: 0;
            transform: translateX(-10px);
            animation: stepIn 0.3s ease forwards;
        }

        .drag-complete .step:nth-child(2) { animation-delay: 0.2s; }
        .drag-complete .step:nth-child(3) { animation-delay: 0.4s; }
        .drag-complete .step:nth-child(4) { animation-delay: 0.6s; }

        @keyframes stepIn {
            to { opacity: 1; transform: translateX(0); }
        }

        .drag-complete .arrow {
            color: var(--gold-400);
        }

        /* Burn Interaction */
        .burn-box {
            position: relative;
            height: 128px;
            border-radius: 12px;
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(201,184,154,0.1);
            cursor: pointer;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .burn-box:hover {
            transform: scale(1.01);
        }

        .burn-box.complete {
            background: linear-gradient(135deg, rgba(234,179,8,0.15), rgba(245,158,11,0.1));
            border-color: rgba(234,179,8,0.3);
            cursor: default;
        }

        .burn-content {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .burn-text {
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--warm-muted);
            margin-bottom: 8px;
        }

        .burn-dots {
            display: flex;
            gap: 4px;
        }

        .burn-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(201,184,154,0.2);
            transition: background 0.2s ease;
        }

        .burn-dot.filled {
            background: var(--gold-500);
        }

        .burn-complete {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
        }

        .burn-complete-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .burn-complete-text {
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--gold-400);
        }

        .burn-emoji {
            position: absolute;
            pointer-events: none;
            font-size: 24px;
            animation: burnFloat 1s ease forwards;
        }

        @keyframes burnFloat {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }

        /* Type Interaction */
        .type-input {
            width: 100%;
            padding: 16px 24px;
            border-radius: 12px;
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(234,179,8,0.2);
            font-family: var(--font-mono);
            font-size: 16px;
            text-align: center;
            color: var(--warm-primary);
            outline: none;
            transition: all 0.3s ease;
        }

        .type-input::placeholder {
            color: var(--warm-ghost);
        }

        .type-input:focus {
            border-color: rgba(234,179,8,0.5);
        }

        .type-hint {
            text-align: center;
            margin-top: 12px;
            font-family: var(--font-mono);
            font-size: 12px;
            color: var(--warm-ghost);
        }

        .type-hint span {
            transition: opacity 0.1s ease;
        }

        .type-hint span.matched {
            opacity: 1;
        }

        .type-hint span.unmatched {
            opacity: 0.3;
        }

        .type-complete {
            display: none;
            text-align: center;
            padding: 32px;
        }

        .type-complete-text {
            font-family: var(--font-mono);
            font-size: 24px;
            color: var(--gold-400);
            letter-spacing: 0.1em;
            margin-bottom: 8px;
        }

        .type-complete-sub {
            font-size: 14px;
            color: var(--warm-muted);
        }

        /* Explore Interaction */
        .explore-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .explore-item {
            padding: 16px;
            border-radius: 12px;
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(201,184,154,0.1);
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
        }

        .explore-item:hover {
            transform: scale(1.02);
        }

        .explore-item.explored {
            background: linear-gradient(135deg, rgba(234,179,8,0.15), rgba(234,179,8,0.05));
            border-color: rgba(234,179,8,0.3);
        }

        .explore-icon {
            font-size: 20px;
            margin-bottom: 8px;
            display: block;
        }

        .explore-name {
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--warm-secondary);
            transition: color 0.2s ease;
        }

        .explore-item.explored .explore-name {
            color: var(--gold-400);
        }

        .explore-check {
            display: none;
            margin-left: 8px;
            color: var(--gold-500);
        }

        .explore-item.explored .explore-check {
            display: inline;
        }

        .explore-complete {
            display: none;
            text-align: center;
            margin-top: 24px;
        }

        .explore-complete p {
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--gold-400);
        }

        /* Final CTA */
        .final-section {
            min-height: 100vh;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 80px 24px;
            text-align: center;
        }

        .final-section.show {
            display: flex;
        }

        .final-inner {
            max-width: 540px;
        }

        .final-icon {
            font-size: 64px;
            margin-bottom: 24px;
            animation: pulse 2s ease infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .final-title {
            font-size: clamp(28px, 5vw, 40px);
            font-weight: 300;
            background: linear-gradient(135deg, #faf8f5 0%, #c9b89a 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 16px;
        }

        .final-subtitle {
            font-size: 16px;
            color: var(--warm-secondary);
            margin-bottom: 32px;
            line-height: 1.7;
        }

        .final-cta {
            display: inline-block;
            padding: 16px 32px;
            border-radius: 12px;
            background: linear-gradient(135deg, rgba(234,179,8,0.3), rgba(245,158,11,0.2));
            border: 1px solid rgba(234,179,8,0.4);
            font-family: var(--font-mono);
            font-size: 14px;
            letter-spacing: 0.05em;
            color: var(--gold-400);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .final-cta:hover {
            transform: scale(1.05);
            background: linear-gradient(135deg, rgba(234,179,8,0.4), rgba(245,158,11,0.3));
        }

        .final-back {
            display: block;
            margin-top: 24px;
            font-family: var(--font-mono);
            font-size: 13px;
            color: var(--warm-muted);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .final-back:hover {
            color: var(--warm-secondary);
        }

        /* Shake Animation */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }

        .shake {
            animation: shake 0.4s ease;
        }

        /* Responsive */
        @media (max-width: 640px) {
            .header {
                padding: 12px 16px;
            }

            .phase {
                padding: 60px 16px;
            }

            .explore-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Progress Bar -->
    <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
    </div>

    <!-- Header -->
    <header class="header">
        <a href="/" class="back-link">&larr; Hub</a>
        <div class="level-badge">
            <span id="levelText">Newcomer</span>
        </div>
    </header>

    <!-- Phase 1: Newcomer -->
    <section class="phase unlocked" id="phase-1" data-phase="1">
        <div class="phase-inner">
            <div class="phase-level">Newcomer</div>
            <h2 class="phase-title">You arrive here.</h2>
            <p class="phase-subtitle">Welcome to the rabbit hole.</p>

            <div class="phase-content">
                <p>$asdfasdfa. A token on Solana.</p>
                <p>Created on pump.fun. Nothing more.</p>
                <p>No promises. No roadmap. No team allocation.</p>
                <p>Just code. Code that does one thing.</p>
            </div>

            <div class="lock-indicator">
                <span>&#128274;</span>
                <span>Section locked</span>
            </div>

            <div class="interaction">
                <p style="font-family: var(--font-mono); font-size: 13px; color: var(--warm-ghost); text-align: center;">
                    Scroll to continue &darr;
                </p>
            </div>
        </div>
    </section>

    <!-- Phase 2: Mechanism -->
    <section class="phase" id="phase-2" data-phase="2">
        <div class="phase-inner">
            <div class="phase-level">Newcomer &rarr; Initiate</div>
            <h2 class="phase-title">The Mechanism</h2>
            <p class="phase-subtitle">How it really works.</p>

            <div class="phase-content">
                <p>When a creator earns fees on pump.fun...</p>
                <p>Those fees trigger an automatic burn.</p>
                <p>Creator earns &rarr; ASDF buys back &rarr; Tokens burned forever.</p>
                <p>Simple. Transparent. Verifiable.</p>
            </div>

            <div class="lock-indicator">
                <span>&#128274;</span>
                <span>Section locked</span>
            </div>

            <div class="interaction" id="drag-interaction">
                <div class="drag-track" id="dragTrack">
                    <div class="drag-hint">Drag &rarr;</div>
                    <div class="drag-reveal" id="dragReveal">Creator &rarr; Buy &rarr; Burn &#128293;</div>
                    <div class="drag-handle" id="dragHandle">&#10095;&#10095;</div>
                </div>
                <div class="drag-complete" id="dragComplete">
                    <span class="step" style="opacity: 0.6;">Creator earns</span>
                    <span class="step arrow">&rarr;</span>
                    <span class="step" style="color: var(--amber-400);">ASDF buys</span>
                    <span class="step arrow">&rarr;</span>
                    <span class="step" style="color: var(--orange-500);">Burned forever</span>
                    <span class="step">&#128293;</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Phase 3: Daemon -->
    <section class="phase" id="phase-3" data-phase="3">
        <div class="phase-inner">
            <div class="phase-level">Initiate</div>
            <h2 class="phase-title">The Daemon</h2>
            <p class="phase-subtitle">Code that runs. Always.</p>

            <div class="phase-content">
                <p>A program watches the blockchain.</p>
                <p>When conditions are met, it acts.</p>
                <p>No human intervention. No centralized control.</p>
                <p>Just code executing code.</p>
                <p>Open source. Readable. Executable by all.</p>
            </div>

            <div class="lock-indicator">
                <span>&#128274;</span>
                <span>Section locked</span>
            </div>

            <div class="interaction">
                <div class="burn-box" id="burnBox">
                    <div class="burn-content" id="burnContent">
                        <p class="burn-text">Click to burn (<span id="burnCount">0</span>/5)</p>
                        <div class="burn-dots">
                            <div class="burn-dot" data-index="0"></div>
                            <div class="burn-dot" data-index="1"></div>
                            <div class="burn-dot" data-index="2"></div>
                            <div class="burn-dot" data-index="3"></div>
                            <div class="burn-dot" data-index="4"></div>
                        </div>
                    </div>
                    <div class="burn-complete" id="burnComplete">
                        <div class="burn-complete-icon">&#128293;</div>
                        <p class="burn-complete-text">Burned. Forever.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Phase 4: Philosophy -->
    <section class="phase" id="phase-4" data-phase="4">
        <div class="phase-inner">
            <div class="phase-level">Initiate &rarr; Believer</div>
            <h2 class="phase-title">The Philosophy</h2>
            <p class="phase-subtitle">Deeper into the rabbit hole.</p>

            <div class="phase-content">
                <p>Most tokens promise everything.</p>
                <p>$asdfasdfa promises nothing.</p>
                <p>Don't trust. Verify.</p>
                <p>Don't extract. Burn.</p>
                <p>Don't panic. Hold.</p>
            </div>

            <div class="lock-indicator">
                <span>&#128274;</span>
                <span>Section locked</span>
            </div>

            <div class="interaction" id="type-interaction">
                <input
                    type="text"
                    class="type-input"
                    id="typeInput"
                    placeholder="Type the phrase..."
                    autocomplete="off"
                    spellcheck="false"
                >
                <div class="type-hint" id="typeHint">
                    Hint: <span id="hintText"></span>
                </div>
                <div class="type-complete" id="typeComplete">
                    <p class="type-complete-text">This is fine.</p>
                    <p class="type-complete-sub">&#128293; You understand now.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Phase 5: Ecosystem -->
    <section class="phase" id="phase-5" data-phase="5">
        <div class="phase-inner">
            <div class="phase-level">Believer</div>
            <h2 class="phase-title">The Ecosystem</h2>
            <p class="phase-subtitle">Built by builders. For builders.</p>

            <div class="phase-content">
                <p>Tools created by the community.</p>
                <p>Burn Tracker - Watch burns in real-time.</p>
                <p>HolDex - Track your position.</p>
                <p>ASDForecast - Community predictions.</p>
                <p>Games - Earn while you learn.</p>
                <p>Anyone can build. The code is open.</p>
            </div>

            <div class="lock-indicator">
                <span>&#128274;</span>
                <span>Section locked</span>
            </div>

            <div class="interaction">
                <div class="explore-grid" id="exploreGrid">
                    <div class="explore-item" data-tool="burns">
                        <span class="explore-icon">&#128293;</span>
                        <span class="explore-name">Burn Tracker<span class="explore-check">&#10003;</span></span>
                    </div>
                    <div class="explore-item" data-tool="holdex">
                        <span class="explore-icon">&#128200;</span>
                        <span class="explore-name">HolDex<span class="explore-check">&#10003;</span></span>
                    </div>
                    <div class="explore-item" data-tool="forecast">
                        <span class="explore-icon">&#127919;</span>
                        <span class="explore-name">ASDForecast<span class="explore-check">&#10003;</span></span>
                    </div>
                    <div class="explore-item" data-tool="games">
                        <span class="explore-icon">&#127918;</span>
                        <span class="explore-name">Games<span class="explore-check">&#10003;</span></span>
                    </div>
                </div>
                <div class="explore-complete" id="exploreComplete">
                    <p>You know the ecosystem. Ready to build?</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Final Section -->
    <section class="final-section" id="finalSection">
        <div class="final-inner">
            <div class="final-icon">&#128293;</div>
            <h2 class="final-title">You're a Believer now.</h2>
            <p class="final-subtitle">
                You understand. You verify. You burn.<br>
                Ready to build with the family?
            </p>
            <a href="deep-learn.html" class="final-cta">Become a Builder &rarr;</a>
            <a href="/" class="final-back">Return to Hub</a>
        </div>
    </section>

    <script>
        // ============================================
        // STATE
        // ============================================
        const state = {
            completedPhases: [],
            currentLevel: 'Newcomer'
        };

        const levels = {
            0: 'Newcomer',
            1: 'Newcomer',
            2: 'Initiate',
            3: 'Initiate',
            4: 'Believer',
            5: 'Believer'
        };

        // ============================================
        // UTILITY FUNCTIONS
        // ============================================
        function updateLevel() {
            state.currentLevel = levels[state.completedPhases.length] || 'Believer';
            document.getElementById('levelText').textContent = state.currentLevel;
        }

        function updateProgress() {
            const progress = (state.completedPhases.length / 5) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
        }

        function unlockPhase(phaseNum) {
            const phase = document.getElementById(`phase-${phaseNum}`);
            if (phase) {
                phase.classList.add('unlocked');
            }
        }

        function completePhase(phaseNum) {
            if (state.completedPhases.includes(phaseNum)) return;

            state.completedPhases.push(phaseNum);
            const phase = document.getElementById(`phase-${phaseNum}`);
            if (phase) {
                phase.classList.add('completed');
            }

            updateLevel();
            updateProgress();

            // Unlock next phase
            if (phaseNum < 5) {
                unlockPhase(phaseNum + 1);
            }

            // Show final section when all complete
            if (state.completedPhases.length === 5) {
                document.getElementById('finalSection').classList.add('show');
            }

            // Save state
            localStorage.setItem('asdf_learn_state', JSON.stringify(state));
        }

        // ============================================
        // PHASE 1: SCROLL
        // ============================================
        let phase1Timer = null;

        function initPhase1() {
            const phase1 = document.getElementById('phase-1');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && !state.completedPhases.includes(1)) {
                        // Auto-complete after 2 seconds of viewing
                        phase1Timer = setTimeout(() => {
                            completePhase(1);
                        }, 2000);
                    } else {
                        clearTimeout(phase1Timer);
                    }
                });
            }, { threshold: 0.5 });

            observer.observe(phase1);
        }

        // ============================================
        // PHASE 2: DRAG
        // ============================================
        function initPhase2() {
            const handle = document.getElementById('dragHandle');
            const reveal = document.getElementById('dragReveal');
            const track = document.getElementById('dragTrack');
            const hint = track.querySelector('.drag-hint');
            const complete = document.getElementById('dragComplete');

            let isDragging = false;
            let startX = 0;
            let currentX = 0;
            const maxDrag = 200;

            function onDragStart(e) {
                if (state.completedPhases.includes(2)) return;
                isDragging = true;
                startX = e.type === 'touchstart' ? e.touches[0].clientX : e.clientX;
                handle.style.cursor = 'grabbing';
            }

            function onDragMove(e) {
                if (!isDragging) return;
                e.preventDefault();

                const clientX = e.type === 'touchmove' ? e.touches[0].clientX : e.clientX;
                const diff = clientX - startX;
                currentX = Math.max(0, Math.min(maxDrag, diff));

                handle.style.transform = `translateY(-50%) translateX(${currentX}px)`;
                reveal.style.clipPath = `inset(0 ${100 - (currentX / maxDrag) * 100}% 0 0)`;
                hint.style.opacity = 1 - (currentX / maxDrag);

                if (currentX >= maxDrag * 0.95) {
                    completePhase2();
                }
            }

            function onDragEnd() {
                if (!isDragging) return;
                isDragging = false;
                handle.style.cursor = 'grab';

                if (currentX < maxDrag * 0.95) {
                    // Reset
                    handle.style.transform = 'translateY(-50%) translateX(0)';
                    reveal.style.clipPath = 'inset(0 100% 0 0)';
                    hint.style.opacity = 1;
                    currentX = 0;
                }
            }

            function completePhase2() {
                track.style.display = 'none';
                complete.style.display = 'flex';
                completePhase(2);
            }

            handle.addEventListener('mousedown', onDragStart);
            handle.addEventListener('touchstart', onDragStart);
            document.addEventListener('mousemove', onDragMove);
            document.addEventListener('touchmove', onDragMove, { passive: false });
            document.addEventListener('mouseup', onDragEnd);
            document.addEventListener('touchend', onDragEnd);
        }

        // ============================================
        // PHASE 3: BURN
        // ============================================
        function initPhase3() {
            const burnBox = document.getElementById('burnBox');
            const burnCount = document.getElementById('burnCount');
            const burnContent = document.getElementById('burnContent');
            const burnComplete = document.getElementById('burnComplete');
            const dots = document.querySelectorAll('.burn-dot');

            let count = 0;
            const required = 5;

            burnBox.addEventListener('click', (e) => {
                if (state.completedPhases.includes(3)) return;

                // Create burn emoji at click position
                const rect = burnBox.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                const emoji = document.createElement('span');
                emoji.className = 'burn-emoji';
                emoji.textContent = 'ðŸ”¥';
                emoji.style.left = `${x - 12}px`;
                emoji.style.top = `${y - 12}px`;
                burnBox.appendChild(emoji);

                setTimeout(() => emoji.remove(), 1000);

                // Update count
                count++;
                burnCount.textContent = count;
                dots[count - 1].classList.add('filled');

                if (count >= required) {
                    setTimeout(() => {
                        burnContent.style.display = 'none';
                        burnComplete.style.display = 'flex';
                        burnBox.classList.add('complete');
                        completePhase(3);
                    }, 300);
                }
            });
        }

        // ============================================
        // PHASE 4: TYPE
        // ============================================
        function initPhase4() {
            const input = document.getElementById('typeInput');
            const hint = document.getElementById('hintText');
            const typeInteraction = document.getElementById('type-interaction');
            const typeComplete = document.getElementById('typeComplete');
            const target = 'This is fine';

            // Render hint
            hint.innerHTML = target.split('').map(char =>
                `<span class="unmatched">${char}</span>`
            ).join('');

            input.addEventListener('input', () => {
                const value = input.value;

                // Update hint
                const spans = hint.querySelectorAll('span');
                spans.forEach((span, i) => {
                    if (value[i]?.toLowerCase() === target[i].toLowerCase()) {
                        span.classList.add('matched');
                        span.classList.remove('unmatched');
                    } else {
                        span.classList.remove('matched');
                        span.classList.add('unmatched');
                    }
                });

                // Check completion
                if (value.toLowerCase() === target.toLowerCase()) {
                    input.style.display = 'none';
                    document.getElementById('typeHint').style.display = 'none';
                    typeComplete.style.display = 'block';
                    completePhase(4);
                } else if (value.length >= target.length && value.toLowerCase() !== target.toLowerCase()) {
                    input.classList.add('shake');
                    setTimeout(() => input.classList.remove('shake'), 400);
                }
            });
        }

        // ============================================
        // PHASE 5: EXPLORE
        // ============================================
        function initPhase5() {
            const grid = document.getElementById('exploreGrid');
            const complete = document.getElementById('exploreComplete');
            const items = grid.querySelectorAll('.explore-item');

            const explored = new Set();

            items.forEach(item => {
                item.addEventListener('click', () => {
                    if (state.completedPhases.includes(5)) return;

                    const tool = item.dataset.tool;
                    if (!explored.has(tool)) {
                        explored.add(tool);
                        item.classList.add('explored');

                        if (explored.size === items.length) {
                            setTimeout(() => {
                                complete.style.display = 'block';
                                completePhase(5);
                            }, 300);
                        }
                    }
                });
            });
        }

        // ============================================
        // LOAD STATE
        // ============================================
        function loadState() {
            const saved = localStorage.getItem('asdf_learn_state');
            if (saved) {
                const parsed = JSON.parse(saved);
                state.completedPhases = parsed.completedPhases || [];
                state.currentLevel = parsed.currentLevel || 'Newcomer';

                // Restore UI state
                state.completedPhases.forEach(phaseNum => {
                    const phase = document.getElementById(`phase-${phaseNum}`);
                    if (phase) {
                        phase.classList.add('unlocked', 'completed');
                    }
                    // Unlock next phase
                    if (phaseNum < 5) {
                        unlockPhase(phaseNum + 1);
                    }
                });

                updateLevel();
                updateProgress();

                if (state.completedPhases.length === 5) {
                    document.getElementById('finalSection').classList.add('show');
                }
            }
        }

        // ============================================
        // INITIALIZE
        // ============================================
        document.addEventListener('DOMContentLoaded', () => {
            loadState();
            initPhase1();
            initPhase2();
            initPhase3();
            initPhase4();
            initPhase5();
        });
    </script>
</body>
</html>
