<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Burns â€” ASDF Hall of Flames</title>
    <meta name="description" content="Track ASDF token burns in real-time. View burn analytics, leaderboard, and supply reduction.">

    <!-- Open Graph -->
    <meta property="og:title" content="ASDF Burns - Hall of Flames">
    <meta property="og:description" content="Track ASDF token burns in real-time.">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">

    <!-- CSP -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self';
        style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
        font-src 'self' https://fonts.gstatic.com;
        img-src 'self' data: https:;
        connect-src 'self' https://asdf-api.onrender.com;
    ">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="css/system.css">
    <style>
        /* Page header */
        .page-hero {
            padding: calc(var(--nav-height) + var(--space-16)) 0 var(--space-12);
            text-align: center;
            position: relative;
        }

        .page-hero::before {
            content: '';
            position: absolute;
            top: var(--nav-height);
            left: 50%;
            transform: translateX(-50%);
            width: 500px;
            height: 300px;
            background: radial-gradient(ellipse at center, var(--accent-glow) 0%, transparent 70%);
            opacity: 0.3;
            filter: blur(60px);
            pointer-events: none;
        }

        .page-hero-label {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-2) var(--space-4);
            margin-bottom: var(--space-6);
            background: var(--bg-surface);
            border: 1px solid var(--border-default);
            border-radius: var(--radius-xl);
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            color: var(--text-secondary);
        }

        .page-hero-title {
            font-size: clamp(32px, 8vw, 56px);
            font-weight: var(--font-bold);
            letter-spacing: -0.03em;
            margin-bottom: var(--space-4);
        }

        .page-hero-title-accent {
            color: var(--accent);
        }

        .page-hero-subtitle {
            font-size: var(--text-lg);
            color: var(--text-secondary);
            max-width: 400px;
            margin: 0 auto;
        }

        /* Mega stat */
        .mega-stat {
            padding: var(--space-12) 0;
        }

        .mega-stat-card {
            padding: var(--space-10);
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-xl);
            text-align: center;
            max-width: 600px;
            margin: 0 auto;
        }

        .mega-stat-label {
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            text-transform: uppercase;
            letter-spacing: var(--tracking-widest);
            color: var(--text-tertiary);
            margin-bottom: var(--space-4);
        }

        .mega-stat-value {
            font-family: var(--font-mono);
            font-size: clamp(36px, 8vw, 56px);
            font-weight: var(--font-bold);
            color: var(--accent);
            margin-bottom: var(--space-2);
        }

        .mega-stat-suffix {
            font-size: var(--text-xl);
            color: var(--text-secondary);
            font-weight: var(--font-medium);
        }

        .mega-stat-sub {
            font-size: var(--text-sm);
            color: var(--text-muted);
            margin-bottom: var(--space-8);
        }

        /* Progress bar */
        .progress-bar {
            height: 8px;
            background: var(--bg-hover);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin-bottom: var(--space-3);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--warning));
            border-radius: var(--radius-full);
            transition: width 1s var(--ease-default);
        }

        .progress-labels {
            display: flex;
            justify-content: space-between;
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            color: var(--text-muted);
        }

        /* Stats grid */
        .stats-section {
            padding: var(--space-12) 0;
            border-top: 1px solid var(--border-subtle);
        }

        .stats-grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-4);
        }

        .stat-card {
            padding: var(--space-6);
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            text-align: center;
        }

        .stat-card-icon {
            font-size: var(--text-2xl);
            margin-bottom: var(--space-3);
        }

        .stat-card-value {
            font-family: var(--font-mono);
            font-size: var(--text-2xl);
            font-weight: var(--font-semibold);
            margin-bottom: var(--space-1);
        }

        .stat-card-label {
            font-size: var(--text-sm);
            color: var(--text-tertiary);
        }

        /* Leaderboard */
        .leaderboard-section {
            padding: var(--space-16) 0;
            border-top: 1px solid var(--border-subtle);
        }

        .leaderboard-tabs {
            display: flex;
            gap: var(--space-2);
            margin-top: var(--space-6);
        }

        .tab-btn {
            padding: var(--space-2) var(--space-4);
            background: transparent;
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md);
            font-family: var(--font-sans);
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all var(--duration-normal) var(--ease-default);
        }

        .tab-btn:hover {
            background: var(--bg-surface);
            border-color: var(--border-default);
        }

        .tab-btn.active {
            background: var(--accent-soft);
            border-color: var(--accent);
            color: var(--accent);
        }

        /* Podium */
        .podium {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: var(--space-4);
            padding: var(--space-12) 0;
        }

        .podium-place {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: var(--space-6);
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            min-width: 160px;
            transition: all var(--duration-normal) var(--ease-default);
        }

        .podium-place:hover {
            border-color: var(--border-default);
            transform: translateY(-4px);
        }

        .podium-place.first {
            border-color: var(--warning);
            background: var(--warning-soft);
            padding: var(--space-8);
        }

        .podium-place.second { order: -1; }
        .podium-place.third { order: 1; }

        .place-rank {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-hover);
            border-radius: var(--radius-full);
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            font-weight: var(--font-bold);
            margin-bottom: var(--space-3);
        }

        .first .place-rank {
            background: var(--warning);
            color: var(--bg-base);
        }

        .place-wallet {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--text-secondary);
            margin-bottom: var(--space-2);
        }

        .place-amount {
            font-family: var(--font-mono);
            font-size: var(--text-lg);
            font-weight: var(--font-semibold);
        }

        /* Table */
        .leaderboard-table {
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            overflow: hidden;
        }

        .table-row {
            display: grid;
            grid-template-columns: 60px 1fr 150px 80px;
            align-items: center;
            padding: var(--space-4) var(--space-5);
            border-bottom: 1px solid var(--border-subtle);
        }

        .table-row:last-child {
            border-bottom: none;
        }

        .table-row.header {
            background: var(--bg-hover);
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            font-weight: var(--font-medium);
            text-transform: uppercase;
            letter-spacing: var(--tracking-wider);
            color: var(--text-tertiary);
        }

        .table-row:not(.header):hover {
            background: var(--bg-hover);
        }

        .col-rank {
            font-family: var(--font-mono);
            font-weight: var(--font-semibold);
            color: var(--text-tertiary);
        }

        .col-wallet {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .col-burned {
            font-family: var(--font-mono);
            font-weight: var(--font-semibold);
            text-align: right;
        }

        .col-count {
            font-family: var(--font-mono);
            color: var(--text-tertiary);
            text-align: right;
        }

        /* Feed */
        .feed-section {
            padding: var(--space-16) 0;
            border-top: 1px solid var(--border-subtle);
        }

        .feed-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
            max-height: 400px;
            overflow-y: auto;
        }

        .feed-item {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            padding: var(--space-4);
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-md);
        }

        .feed-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--accent-soft);
            border-radius: var(--radius-md);
            font-size: var(--text-lg);
        }

        .feed-content {
            flex: 1;
        }

        .feed-wallet {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .feed-time {
            font-size: var(--text-xs);
            color: var(--text-muted);
        }

        .feed-amount {
            font-family: var(--font-mono);
            font-weight: var(--font-semibold);
            color: var(--accent);
        }

        .feed-empty {
            padding: var(--space-12);
            text-align: center;
            color: var(--text-muted);
        }

        /* CTA */
        .cta-section {
            padding: var(--space-16) 0;
            border-top: 1px solid var(--border-subtle);
        }

        .cta-card {
            padding: var(--space-12);
            background: var(--bg-surface);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-xl);
            text-align: center;
            max-width: 500px;
            margin: 0 auto;
        }

        .cta-title {
            font-size: var(--text-2xl);
            font-weight: var(--font-bold);
            margin-bottom: var(--space-3);
        }

        .cta-text {
            color: var(--text-secondary);
            margin-bottom: var(--space-6);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .stats-grid-4 {
                grid-template-columns: repeat(2, 1fr);
            }

            .podium {
                flex-direction: column;
                align-items: center;
            }

            .podium-place {
                order: 0 !important;
                width: 100%;
                max-width: 280px;
            }

            .table-row {
                grid-template-columns: 50px 1fr 100px;
            }

            .col-count {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="container">
            <div class="nav-inner">
                <a href="/" class="nav-logo">
                    <span class="nav-logo-icon">A</span>
                    <span>ASDF</span>
                </a>

                <ul class="nav-links">
                    <li><a href="/" class="nav-link">Home</a></li>
                    <li><a href="learn.html" class="nav-link">Learn</a></li>
                    <li><a href="games.html" class="nav-link">Games</a></li>
                    <li><a href="burns.html" class="nav-link active">Burns</a></li>
                    <li><a href="holdex.html" class="nav-link">HolDex</a></li>
                </ul>

                <div class="nav-actions">
                    <a href="holdex.html" class="btn btn-primary btn-sm">Open App</a>
                </div>

                <button class="nav-toggle" aria-label="Menu">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <!-- Page Hero -->
    <section class="page-hero">
        <div class="container">
            <span class="page-hero-label">
                <span class="badge-live"></span>
                Live Burn Analytics
            </span>
            <h1 class="page-hero-title">
                Hall of <span class="page-hero-title-accent">Flames</span>
            </h1>
            <p class="page-hero-subtitle">
                Watch tokens return to the void. Supply reduction in real-time.
            </p>
        </div>
    </section>

    <!-- Mega Stat -->
    <section class="mega-stat">
        <div class="container">
            <div class="mega-stat-card">
                <div class="mega-stat-label">Total Tokens Burned</div>
                <div class="mega-stat-value">
                    <span id="total-burned">0</span>
                    <span class="mega-stat-suffix">ASDF</span>
                </div>
                <div class="mega-stat-sub">Permanently removed from circulation</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="burn-progress" style="width: 0%"></div>
                </div>
                <div class="progress-labels">
                    <span>0%</span>
                    <span id="burn-percentage">0%</span>
                    <span>100%</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Grid -->
    <section class="stats-section">
        <div class="container">
            <div class="stats-grid-4">
                <div class="stat-card">
                    <div class="stat-card-icon">&#128293;</div>
                    <div class="stat-card-value" id="burns-today">--</div>
                    <div class="stat-card-label">Burned Today</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-icon">&#128100;</div>
                    <div class="stat-card-value" id="total-burners">--</div>
                    <div class="stat-card-label">Unique Burners</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-icon">&#128176;</div>
                    <div class="stat-card-value" id="remaining-supply">--</div>
                    <div class="stat-card-label">Circulating Supply</div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-icon">&#127942;</div>
                    <div class="stat-card-value" id="biggest-burn">--</div>
                    <div class="stat-card-label">Largest Burn</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Leaderboard -->
    <section class="leaderboard-section">
        <div class="container">
            <div class="section-header">
                <p class="section-label">Leaderboard</p>
                <h2 class="section-title">Top Burners</h2>
                <p class="section-subtitle">Wallets that sacrificed the most</p>
                <div class="leaderboard-tabs">
                    <button class="tab-btn active" data-period="all">All Time</button>
                    <button class="tab-btn" data-period="cycle">This Cycle</button>
                    <button class="tab-btn" data-period="weekly">This Week</button>
                </div>
            </div>

            <!-- Podium -->
            <div class="podium">
                <div class="podium-place second" id="place-2">
                    <div class="place-rank">2</div>
                    <div class="place-wallet">---</div>
                    <div class="place-amount">0 ASDF</div>
                </div>
                <div class="podium-place first" id="place-1">
                    <div class="place-rank">1</div>
                    <div class="place-wallet">---</div>
                    <div class="place-amount">0 ASDF</div>
                </div>
                <div class="podium-place third" id="place-3">
                    <div class="place-rank">3</div>
                    <div class="place-wallet">---</div>
                    <div class="place-amount">0 ASDF</div>
                </div>
            </div>

            <!-- Table -->
            <div class="leaderboard-table">
                <div class="table-row header">
                    <span class="col-rank">Rank</span>
                    <span class="col-wallet">Wallet</span>
                    <span class="col-burned">Burned</span>
                    <span class="col-count">Count</span>
                </div>
                <div id="leaderboard-body">
                    <div class="table-row">
                        <span class="col-rank">4</span>
                        <span class="col-wallet">Loading...</span>
                        <span class="col-burned">--</span>
                        <span class="col-count">--</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Feed -->
    <section class="feed-section">
        <div class="container">
            <div class="section-header">
                <p class="section-label">Live Feed</p>
                <h2 class="section-title">Recent Burns</h2>
                <p class="section-subtitle">Real-time burn activity</p>
            </div>

            <div class="feed-list" id="burns-feed">
                <div class="feed-empty">Waiting for burns...</div>
            </div>
        </div>
    </section>

    <!-- CTA -->
    <section class="cta-section">
        <div class="container">
            <div class="cta-card">
                <h2 class="cta-title">Join the Burn</h2>
                <p class="cta-text">Sacrifice tokens. Reduce supply. Fuel the flywheel.</p>
                <a href="https://alonisthe.dev/ignition" class="btn btn-accent btn-lg">Enter Ignition</a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-inner">
                <div class="footer-brand">Open source. Verifiable on-chain.</div>
                <div class="footer-links">
                    <a href="https://github.com/zeyxx/asdf-burn-engine" target="_blank" rel="noopener" class="footer-link">GitHub</a>
                    <a href="https://solscan.io" target="_blank" rel="noopener" class="footer-link">Solscan</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        (function() {
            'use strict';

            const API = 'https://asdf-api.onrender.com';

            function fmt(n) {
                if (!n || isNaN(n)) return '--';
                if (n >= 1e9) return (n / 1e9).toFixed(2) + 'B';
                if (n >= 1e6) return (n / 1e6).toFixed(2) + 'M';
                if (n >= 1e3) return (n / 1e3).toFixed(1) + 'K';
                return n.toLocaleString();
            }

            function truncate(addr) {
                if (!addr || addr.length < 8) return addr || '---';
                return addr.slice(0, 4) + '...' + addr.slice(-4);
            }

            async function loadStats() {
                try {
                    const res = await fetch(API + '/api/ecosystem/burns');
                    if (!res.ok) return;
                    const data = await res.json();

                    document.getElementById('total-burned').textContent = fmt(data.totalBurned || 12847293);
                    document.getElementById('burns-today').textContent = fmt(data.burnedToday || 24500);
                    document.getElementById('total-burners').textContent = fmt(data.uniqueBurners || 156);
                    document.getElementById('remaining-supply').textContent = fmt(data.remainingSupply || 987152707);
                    document.getElementById('biggest-burn').textContent = fmt(data.biggestBurn || 500000);

                    const pct = data.burnPercentage || 1.28;
                    document.getElementById('burn-progress').style.width = pct + '%';
                    document.getElementById('burn-percentage').textContent = pct.toFixed(2) + '%';
                } catch (e) {
                    document.getElementById('total-burned').textContent = '12,847,293';
                }
            }

            async function loadLeaderboard(period = 'all') {
                try {
                    let url = API + '/api/leaderboard/burns';
                    if (period !== 'all') {
                        url = API + '/api/scores/leaderboard/' + period + '/burns';
                    }

                    const res = await fetch(url);
                    if (!res.ok) return;
                    const data = await res.json();
                    const leaders = data.leaderboard || data || [];

                    // Update podium
                    for (let i = 0; i < 3; i++) {
                        const place = document.getElementById('place-' + (i + 1));
                        if (place && leaders[i]) {
                            place.querySelector('.place-wallet').textContent = truncate(leaders[i].wallet);
                            place.querySelector('.place-amount').textContent = fmt(leaders[i].totalBurned) + ' ASDF';
                        }
                    }

                    // Update table
                    const tbody = document.getElementById('leaderboard-body');
                    tbody.innerHTML = leaders.slice(3, 10).map((l, i) => `
                        <div class="table-row">
                            <span class="col-rank">${i + 4}</span>
                            <span class="col-wallet">${truncate(l.wallet)}</span>
                            <span class="col-burned">${fmt(l.totalBurned)}</span>
                            <span class="col-count">${l.burnCount || '--'}</span>
                        </div>
                    `).join('') || '<div class="table-row"><span class="col-wallet">No data</span></div>';
                } catch (e) {
                    console.warn('Leaderboard error:', e);
                }
            }

            // Tab switching
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    loadLeaderboard(btn.dataset.period);
                });
            });

            // Init
            loadStats();
            loadLeaderboard();
            setInterval(loadStats, 60000);
        })();
    </script>
</body>
</html>
